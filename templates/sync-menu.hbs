<div class="standard-form" autocomplete="off">
  <p>
    {{menuDescription}}
  </p>

  <ul>
    <li><code>{{menuExample1}}</code></li>
    <li>{{{menuExample2}}}</li>
    <li>{{{menuExample3}}}</li>
  </ul>

  <hr/>

  <div class="form-group">
    <label>{{menuLabel}}</label>
    <div class="form-fields">
      <input type="text" name="rootPath" value="{{rootPath}}" />
    </div>
    <p class="notes">{{{menuNote1}}}</p>
  </div>

  <hr/>

  <div class="form-group">
    <label>{{flattenLabel}}</label>
    <div class="form-fields">
      <input type="checkbox" name="flattenPaths" {{#if flattenPaths}}checked{{/if}} />
    </div>
    <p class="notes">{{{flattenHint}}}</p>
  </div>

  <hr/>

  <h3>{{soundSyncTitle}}</h3>
  <p class="notes">{{{soundSyncHint}}}</p>

  <div class="form-group">
    <label>{{soundSyncStrategyLabel}}</label>
    <div class="form-fields">
      <select name="soundSyncStrategy">
        {{selectOptions soundStrategies selected=soundSyncStrategy}}
      </select>
    </div>
    <p class="notes">{{{soundSyncStrategyHint}}}</p>
  </div>

  <div class="form-group">
    <label>{{soundMatchModeLabel}}</label>
    <div class="form-fields">
      <select name="soundMatchMode">
        {{selectOptions soundMatchModes selected=soundMatchMode}}
      </select>
    </div>
    <p class="notes">{{{soundMatchModeHint}}}</p>
  </div>

  <div class="form-group">
    <label>{{orphanPolicyLabel}}</label>
    <div class="form-fields">
      <select name="orphanPolicy">
        {{selectOptions orphanPolicies selected=orphanPolicy}}
      </select>
    </div>
    <p class="notes">{{{orphanPolicyHint}}}</p>
  </div>

  <div class="form-group">
    <label>{{updateSoundParamsLabel}}</label>
    <div class="form-fields">
      <input type="checkbox" name="updateSoundParams" {{#if updateSoundParams}}checked{{/if}} />
    </div>
    <p class="notes">{{{updateSoundParamsHint}}}</p>
  </div>

  <div class="form-group">
    <label>{{updateSoundPathLabel}}</label>
    <div class="form-fields">
      <input type="checkbox" name="updateSoundPath" {{#if updateSoundPath}}checked{{/if}} />
    </div>
    <p class="notes">{{{updateSoundPathHint}}}</p>
  </div>

  <div class="form-group">
    <label>{{updateSoundNameLabel}}</label>
    <div class="form-fields">
      <input type="checkbox" name="updateSoundName" {{#if updateSoundName}}checked{{/if}} />
    </div>
    <p class="notes">{{{updateSoundNameHint}}}</p>
  </div>

  <div class="form-group">
    <label>{{updateSoundSortLabel}}</label>
    <div class="form-fields">
      <input type="checkbox" name="updateSoundSort" {{#if updateSoundSort}}checked{{/if}} />
    </div>
    <p class="notes">{{{updateSoundSortHint}}}</p>
  </div>

  <div class="form-group">
    <label>{{markManagedSoundsLabel}}</label>
    <div class="form-fields">
      <input type="checkbox" name="markManagedSounds" {{#if markManagedSounds}}checked{{/if}} />
    </div>
    <p class="notes">{{{markManagedSoundsHint}}}</p>
  </div>

  <div class="form-group">
    <label>{{preferManagedMatchLabel}}</label>
    <div class="form-fields">
      <input type="checkbox" name="preferManagedMatch" {{#if preferManagedMatch}}checked{{/if}} />
    </div>
    <p class="notes">{{{preferManagedMatchHint}}}</p>
  </div>

  <hr/>

  <h3>{{presetsTitle}}</h3>
  <p class="notes">{{{presetsHint}}}</p>

  <div class="form-group">
    <button type="button" data-action="add-preset">
      <i class="fas fa-plus"></i> {{presetsAdd}}
    </button>
  </div>

  {{#if presets.length}}
    <ol class="playlist-sync-preset" style="margin: 0; padding-left: 1.25rem;">
      {{#each presets as |p idx|}}
        <li style="margin-bottom: .75rem;">
          <div class="form-group" style="align-items: center; gap: .5rem;">
            <label style="flex: 0 0 110px;">{{../presetLabelPattern}}</label>
            <div class="form-fields" style="flex: 1 1 auto;">
              <input type="text" value="{{p.pattern}}" data-index="{{idx}}" data-field="pattern" placeholder="audio/ambient|audio/music" />
            </div>
            <button type="button" data-action="move-preset" data-dir="up" data-index="{{idx}}" title="{{../presetMoveUpTitle}}">
              <i class="fas fa-chevron-up"></i>
            </button>
            <button type="button" data-action="move-preset" data-dir="down" data-index="{{idx}}" title="{{../presetMoveDownTitle}}">
              <i class="fas fa-chevron-down"></i>
            </button>
            <button type="button" data-action="delete-preset" data-index="{{idx}}" title="{{../presetDeleteTitle}}">
              <i class="fas fa-trash"></i>
            </button>
          </div>

          {{#unless p._valid}}
            <p class="notes" style="color: var(--color-level-error); margin-top: -0.25rem;">
              {{../presetInvalidRegexPrefix}} {{p._error}}
            </p>
          {{/unless}}

          <div class="form-group" style="gap: .5rem;">
            <label style="flex: 0 0 110px;">{{../presetLabelVolume}}</label>
            <div class="form-fields" style="flex: 1 1 auto;">
              <input type="number" min="0" max="1" step="0.05" value="{{p.volume}}" data-index="{{idx}}" data-field="volume" />
            </div>

            <label style="flex: 0 0 70px; text-align:right;">{{../presetLabelRepeat}}</label>
            <div class="form-fields" style="flex: 0 0 auto;">
              <input type="checkbox" {{#if p.repeat}}checked{{/if}} data-index="{{idx}}" data-field="repeat" />
            </div>
          </div>

          <div class="form-group" style="gap: .5rem;">
            <label style="flex: 0 0 110px;">{{../presetLabelChannel}}</label>
            <div class="form-fields" style="flex: 1 1 auto;">
              <select data-index="{{idx}}" data-field="channel">
                {{selectOptions ../channels selected=p.channel}}
              </select>
            </div>

            <label style="flex: 0 0 70px; text-align:right;">{{../presetLabelFade}}</label>
            <div class="form-fields" style="flex: 0 0 120px;">
              <input type="number" min="0" step="50" value="{{p.fade}}" data-index="{{idx}}" data-field="fade" />
            </div>
          </div>

          <div class="form-group" style="gap: .5rem;">
            <label style="flex: 0 0 110px;">{{../presetLabelMode}}</label>
            <div class="form-fields" style="flex: 1 1 auto;">
              <select data-index="{{idx}}" data-field="mode">
                {{selectOptions ../modes selected=p.mode}}
              </select>
            </div>
          </div>

        </li>
      {{/each}}
    </ol>
  {{else}}
    <p class="notes">{{presetsEmpty}}</p>
  {{/if}}

  <hr/>

  <div class="form-group">
    <button type="button" data-action="sync">
      <i class="fas fa-rotate"></i> {{menuButton}}
    </button>
  </div>

  <p class="notes">
    {{{menuNote2}}}
  </p>
</div>
